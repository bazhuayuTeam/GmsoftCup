var data = ChildDialogUtil.getExchangeData();
userDialogValid.valid = function(){
	return valid(setData());
}
$(document).ready(function() {
	FormUtil.createComponent( [ "endTime" ],"timepicker");
	FormUtil.createComponent( [ "startTime" ],"timepicker");
		load();
		
		$("#dialog-modal").createDialog( {
			height : 300,
			width : 380,
			resizable : false,
			modal : true,
			close : function(event) {
				if (!event.data) {
					DialogUtil.getTopWindow().WindowManager.hiddenFlowWindow();
					return;
				}
				if (event.data.type == DialogUtil.EVENT_OK) {
					    var result = getResult();   
						ChildDialogUtil.doClose(DialogUtil.EVENT_OK,result);
					
				}
				else if (event.data.type == DialogUtil.EVENT_CANCEL) {
					DialogUtil.getTopWindow().WindowManager.hiddenFlowWindow();
				}
				DialogUtil.getTopWindow().WindowManager.hiddenFlowWindow();
			}
		});

	});

//验证输入框是否为空
userDialogValid.valid = function(){
	var startTime = $.trim($('#startTime').val());
	var endTime = $.trim($('#endTime').val());
	if(startTime == ""){
		jAlert("请输入评审开始时间!");
		return false;
	}
	if(endTime == ""){
		jAlert("请输入评审结束时间!");
		return false;
	}
	if(startTime>endTime){
		jAlert("结束时间不能小于开始时间!");
		return false;
	}
}

function load(){
	$("#gameName").val(data.gameName);
	$('#gameStep').val(data.gameStep);
	$('#gameMission').val(data.rate);
	$('#startTime').val(data.checkStartTime);
	$('#endTime').val(data.checkEndTime);
	
}
//获取最后结果
function getResult(){
	var startTime = $.trim($('#startTime').val());
	var endTime = $.trim($('#endTime').val());

	var data={};
	data.checkStartTime=startTime;
	data.checkEndTime=endTime;
	return data;
}